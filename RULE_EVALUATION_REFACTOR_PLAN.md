# è§„åˆ™è¯„ä¼°æ¨¡å—é‡æ„è§„åˆ’æ–‡æ¡£

**é¡¹ç›®**: SQLåˆ†æå™¨ - è§„åˆ™è¯„ä¼°æ¨¡å—é‡æ„
**è´Ÿè´£äºº**: è€ç‹ (æš´èºæŠ€æœ¯æµ)
**åˆ›å»ºæ—¶é—´**: 2025-12-01
**é¢„è®¡å·¥æœŸ**: 2-3å‘¨
**é‡æ„æ”¶ç›Š**: ä»£ç å‡å°‘70%+ æ€§èƒ½æå‡300%+

---

## ğŸ“‹ é¡¹ç›®èƒŒæ™¯ä¸ç°çŠ¶

### å½“å‰é—®é¢˜ (2025-12-01 çŠ¶æ€)

#### âŒ æ ¸å¿ƒé—®é¢˜
1. **æ¨¡å—ç¢ç‰‡åŒ–ä¸¥é‡**: 12ä¸ªè§„åˆ™å­¦ä¹ æ¨¡å—ï¼ŒåŠŸèƒ½é‡å ä¸¥é‡
2. **è¯„ä¼°æµç¨‹å¤æ‚**: è°ƒç”¨é“¾7-8å±‚ï¼Œç»´æŠ¤å›°éš¾
3. **å»é‡ç®—æ³•ç®€é™‹**: ä»…åŸºäºæ–‡æœ¬ç›¸ä¼¼åº¦ï¼Œå‡†ç¡®ç‡ä½
4. **æ–‡ä»¶ç§»åŠ¨ç¼ºå¤±**: æ— è‡ªåŠ¨åˆ†ç±»åˆ°approved/issuesæœºåˆ¶
5. **æç¤ºè¯ä¸ç²¾å‡†**: è¯„ä¼°ç»´åº¦ä¸å¤Ÿå…¨é¢

#### ğŸ“Š ç°æœ‰æ¨¡å—æ¸…å•
```
src/services/rule-learning/
â”œâ”€â”€ performance-monitor.ts         (æ€§èƒ½ç›‘æ§)
â”œâ”€â”€ quality-evaluator.ts           (è´¨é‡è¯„ä¼°å™¨ - 537è¡Œ)
â”œâ”€â”€ rule-processor.ts              (è§„åˆ™å¤„ç†å™¨)
â”œâ”€â”€ rule-validator.ts              (è§„åˆ™éªŒè¯å™¨)
â”œâ”€â”€ threshold-adjuster.ts          (é˜ˆå€¼è°ƒæ•´å™¨)
â”œâ”€â”€ auto-approver.ts               (è‡ªåŠ¨å®¡æ‰¹å™¨)
â”œâ”€â”€ directory-filter.ts            (ç›®å½•è¿‡æ»¤å™¨)
â”œâ”€â”€ history-analyzer.ts            (å†å²åˆ†æå™¨)
â”œâ”€â”€ rule-learner.ts                (è§„åˆ™å­¦ä¹ å™¨ - 1289è¡Œ)
â”œâ”€â”€ rule-duplicate-detector.ts     (é‡å¤æ£€æµ‹å™¨ - 403è¡Œ)
â”œâ”€â”€ types.ts                       (ç±»å‹å®šä¹‰)
â””â”€â”€ rule-generator.ts              (è§„åˆ™ç”Ÿæˆå™¨ - 814è¡Œ)
```
**æ€»è®¡**: çº¦3000+è¡Œä»£ç ï¼Œç»´æŠ¤æˆæœ¬å·¨å¤§

#### ğŸ“ å½“å‰ç›®å½•ç»“æ„
```
rules/learning-rules/
â”œâ”€â”€ manual_review/2025-12/    # 21æ¡è§„åˆ™å¾…å¤„ç† âœ…
â”œâ”€â”€ approved/2025-12/        # ç©ºç›®å½•ï¼Œç­‰å¾…è§„åˆ™
â””â”€â”€ issues/                   # ç©ºç›®å½•ï¼Œç­‰å¾…åˆ†ç±»
    â”œâ”€â”€ duplicates/          # (ä¸å­˜åœ¨)
    â”œâ”€â”€ low_quality/         # (ä¸å­˜åœ¨)
    â””â”€â”€ invalid_format/      # (ä¸å­˜åœ¨)
```

---

## ğŸ¯ é‡æ„ç›®æ ‡

### æ ¸å¿ƒç›®æ ‡
1. **ç»Ÿä¸€è¯„ä¼°å¼•æ“**: æ•´åˆç¢ç‰‡åŒ–æ¨¡å—ä¸ºç»Ÿä¸€å¼•æ“
2. **æ™ºèƒ½å»é‡ç®—æ³•**: å®ç°å¤šå±‚å»é‡ç­–ç•¥ï¼Œæå‡å‡†ç¡®ç‡
3. **è‡ªåŠ¨åˆ†ç±»ç³»ç»Ÿ**: å®ç°è§„åˆ™è‡ªåŠ¨åˆ†ç±»åˆ°approved/issues
4. **ä¼˜åŒ–è¯„ä¼°ä½“ç³»**: 5ç»´åº¦ç²¾å‡†è¯„ä¼°ï¼Œæå‡è´¨é‡
5. **ç®€åŒ–ç”¨æˆ·æ“ä½œ**: ä¸€é”®æ‰¹é‡è¯„ä¼°ï¼ŒCLIé›†æˆ

### é‡åŒ–æŒ‡æ ‡
- **ä»£ç å‡å°‘**: 3000+è¡Œ â†’ 800-1000è¡Œ (70%+å‡å°‘)
- **æ€§èƒ½æå‡**: å¤„ç†é€Ÿåº¦æå‡300-500%
- **å»é‡å‡†ç¡®ç‡**: æå‡400-600%
- **è¯„ä¼°ç²¾åº¦**: æå‡200-300%
- **ç”¨æˆ·ä½“éªŒ**: ä¸€é”®å‘½ä»¤ï¼Œå®æ—¶è¿›åº¦ï¼Œè¯¦ç»†æŠ¥å‘Š

---

## ğŸ—ï¸ æ–°æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„å›¾
```
ğŸ“¦ RuleEvaluationEngine (ç»Ÿä¸€è¯„ä¼°å¼•æ“)
â”œâ”€â”€ ğŸ”„ æ‰¹é‡å¤„ç†æµç¨‹ (Batch Processing)
â”œâ”€â”€ ğŸ§  æ™ºèƒ½å»é‡ç®—æ³• (Smart Deduplication)
â”œâ”€â”€ ğŸ“Š è´¨é‡è¯„ä¼°ç³»ç»Ÿ (Quality Assessment)
â”œâ”€â”€ ğŸ“ è‡ªåŠ¨åˆ†ç±»æœºåˆ¶ (Auto Classification)
â””â”€â”€ âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ (Performance Optimization)
```

### å¤„ç†æµç¨‹å›¾
```mermaid
graph TD
    A[manual_review/2025-12/*.md] --> B[æ‰¹é‡è¯»å–è§„åˆ™æ–‡ä»¶]
    B --> C[è§„åˆ™é¢„å¤„ç†ä¸è§£æ]
    C --> D[æ™ºèƒ½å»é‡æ£€æµ‹]
    D --> E{æ˜¯å¦é‡å¤?}
    E -->|æ˜¯| F[ç§»åŠ¨åˆ°issues/duplicates/]
    E -->|å¦| G[è´¨é‡è¯„ä¼°]
    G --> H[5ç»´åº¦è´¨é‡è¯„åˆ†]
    H --> I{è´¨é‡è¾¾æ ‡?}
    I -->|æ˜¯| J[ç§»åŠ¨åˆ°approved/2025-12/]
    I -->|å¦| K[åˆ†ç±»åˆ°issues/low_quality/]
    J --> L[ç”Ÿæˆè¯„ä¼°æŠ¥å‘Š]
    K --> L
    F --> L
```

### æ–°ç›®å½•ç»“æ„
```
src/services/rule-evaluation/
â”œâ”€â”€ RuleEvaluationEngine.ts      # æ ¸å¿ƒå¼•æ“ (æ–°)
â”œâ”€â”€ deduplication/
â”‚   â”œâ”€â”€ SmartDuplicateDetector.ts # æ™ºèƒ½å»é‡å™¨ (é‡æ„)
â”‚   â””â”€â”€ algorithms/
â”‚       â”œâ”€â”€ ExactMatcher.ts       # ç²¾ç¡®åŒ¹é…
â”‚       â”œâ”€â”€ SemanticMatcher.ts    # è¯­ä¹‰åŒ¹é… (å¯é€‰)
â”‚       â”œâ”€â”€ StructuralMatcher.ts  # ç»“æ„åŒ¹é…
â”‚       â””â”€â”€ ContentMatcher.ts     # å†…å®¹åŒ¹é…
â”œâ”€â”€ assessment/
â”‚   â”œâ”€â”€ QualityAssessor.ts       # è´¨é‡è¯„ä¼°å™¨ (é‡æ„)
â”‚   â”œâ”€â”€ prompts/                 # æç¤ºè¯æ¨¡æ¿ (ä¼˜åŒ–)
â”‚   â””â”€â”€ dimensions/
â”‚       â”œâ”€â”€ AccuracyEvaluator.ts  # å‡†ç¡®æ€§è¯„ä¼°
â”‚       â”œâ”€â”€ PracticalityEvaluator.ts # å®ç”¨æ€§è¯„ä¼°
â”‚       â”œâ”€â”€ CompletenessEvaluator.ts # å®Œæ•´æ€§è¯„ä¼°
â”‚       â”œâ”€â”€ GeneralityEvaluator.ts # é€šç”¨æ€§è¯„ä¼°
â”‚       â””â”€â”€ ConsistencyEvaluator.ts # ä¸€è‡´æ€§è¯„ä¼°
â”œâ”€â”€ classification/
â”‚   â”œâ”€â”€ RuleClassifier.ts        # è§„åˆ™åˆ†ç±»å™¨ (æ–°)
â”‚   â”œâ”€â”€ FileManager.ts           # æ–‡ä»¶ç®¡ç†å™¨ (æ–°)
â”‚   â””â”€â”€ decision-tree.ts         # å†³ç­–æ ‘ (æ–°)
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ RuleModels.ts           # è§„åˆ™æ•°æ®æ¨¡å‹ (æ–°)
â”‚   â””â”€â”€ EvaluationModels.ts     # è¯„ä¼°ç»“æœæ¨¡å‹ (æ–°)
â”œâ”€â”€ config/
â”‚   â””â”€â”€ EvaluationConfig.ts     # è¯„ä¼°é…ç½® (æ–°)
â””â”€â”€ types/
    â””â”€â”€ EvaluationTypes.ts      # ç±»å‹å®šä¹‰ (é‡æ„)

# é¢„è®¡æ–‡ä»¶æ•°: 15-20ä¸ª (vs å½“å‰12ä¸ªæ¨¡å—)
# é¢„è®¡ä»£ç é‡: 800-1000è¡Œ (vs å½“å‰3000+è¡Œ)
```

---

## ğŸ§  æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆ

### 1. æ™ºèƒ½å»é‡ç®—æ³•

#### å¤šå±‚å»é‡ç­–ç•¥
```typescript
interface DuplicateResult {
  isDuplicate: boolean;
  similarity: number;      // 0-1 ç›¸ä¼¼åº¦åˆ†æ•°
  duplicateType: 'exact' | 'semantic' | 'structural' | 'none';
  reason: string;         // å»é‡åŸå› 
  confidence: number;     // ç½®ä¿¡åº¦
  matchedRules: RuleInfo[];
}

// å»é‡æƒé‡åˆ†é…
const DUPLICATE_WEIGHTS = {
  EXACT: 0.40,      // ç²¾ç¡®åŒ¹é… (æ ‡é¢˜/ID/SQLæ¨¡å¼)
  SEMANTIC: 0.35,   // è¯­ä¹‰ç›¸ä¼¼ (å‘é‡åŒ–åˆ†æ)
  STRUCTURAL: 0.15, // ç»“æ„ç›¸ä¼¼ (ç±»åˆ«/ä¸¥é‡ç¨‹åº¦)
  CONTENT: 0.10     // å†…å®¹ç‰¹å¾ (å…³é”®è¯/ç¤ºä¾‹)
};

// å»é‡é˜ˆå€¼
const DUPLICATE_THRESHOLDS = {
  EXACT: 0.95,      // ç²¾ç¡®åŒ¹é…é˜ˆå€¼
  SEMANTIC: 0.85,   // è¯­ä¹‰ç›¸ä¼¼é˜ˆå€¼
  STRUCTURAL: 0.75, // ç»“æ„ç›¸ä¼¼é˜ˆå€¼
  WARNING: 0.60     // è­¦å‘Šé˜ˆå€¼
};
```

#### å»é‡æ£€æµ‹æµç¨‹
1. **ç²¾ç¡®åŒ¹é…å±‚**: æ ‡é¢˜/ID/SQLæ¨¡å¼å®Œå…¨ä¸€è‡´ â†’ ç›´æ¥åˆ¤å®šé‡å¤
2. **è¯­ä¹‰ç›¸ä¼¼å±‚**: å‘é‡åŒ–è¯­ä¹‰åˆ†æ â†’ è¯­ä¹‰ç›¸ä¼¼åº¦â‰¥0.85åˆ¤å®šé‡å¤
3. **ç»“æ„ç›¸ä¼¼å±‚**: ç±»åˆ«/ä¸¥é‡ç¨‹åº¦/SQLç»“æ„ç›¸ä¼¼ â†’ è®¡ç®—ç»¼åˆåˆ†æ•°
4. **å†…å®¹ç‰¹å¾å±‚**: å…³é”®è¯é‡å /ç¤ºä¾‹ç›¸ä¼¼åº¦ â†’ æœ€ç»ˆè¡¥å……åˆ¤æ–­

### 2. ä¼˜åŒ–çš„è´¨é‡è¯„ä¼°ç³»ç»Ÿ

#### 5ç»´åº¦è¯„ä¼°ä½“ç³»
```typescript
interface QualityScore {
  qualityScore: number;              // 0-100ç»¼åˆè¯„åˆ†
  dimensionScores: {
    accuracy: number;      // å‡†ç¡®æ€§ 25% (æŠ€æœ¯æè¿°ã€ç¤ºä¾‹ä»£ç æ­£ç¡®æ€§)
    practicality: number;  // å®ç”¨æ€§ 25% (å®é™…åº”ç”¨ä»·å€¼ã€è§£å†³æ–¹æ¡ˆå¯è¡Œæ€§)
    completeness: number;  // å®Œæ•´æ€§ 20% (è§„åˆ™è¦ç´ ã€è§£é‡Šè¯´æ˜å……åˆ†æ€§)
    generality: number;    // é€šç”¨æ€§ 15% (é€‚ç”¨èŒƒå›´ã€ä¸å±€é™äºç‰¹å®šåœºæ™¯)
    consistency: number;   // ä¸€è‡´æ€§ 15% (ä¸ç°æœ‰è§„åˆ™ä¸€è‡´ã€æ ¼å¼è§„èŒƒ)
  };
  shouldKeep: boolean;           // æ˜¯å¦å»ºè®®ä¿ç•™
  qualityLevel: 'excellent' | 'good' | 'fair' | 'poor';
  strengths: string[];           // ä¼˜åŠ¿åˆ—è¡¨
  issues: string[];              // é—®é¢˜åˆ—è¡¨
  suggestions: string[];         // æ”¹è¿›å»ºè®®
  duplicateRisk: 'low' | 'medium' | 'high';
  evaluationSummary: string;     // ç»¼åˆè¯„ä»·æ‘˜è¦
}
```

#### ä¼˜åŒ–çš„è¯„ä¼°æç¤ºè¯
- **æŠ€æœ¯æè¿°å‡†ç¡®æ€§**: æ£€æŸ¥æŠ€æœ¯ç»†èŠ‚ã€ä»£ç ç¤ºä¾‹çš„æ­£ç¡®æ€§
- **å®é™…åº”ç”¨ä»·å€¼**: è¯„ä¼°è§£å†³æ–¹æ¡ˆçš„å¯è¡Œæ€§å’Œå®ç”¨æ€§
- **è§„åˆ™å®Œæ•´æ€§**: æ£€æŸ¥è¦ç´ é½å…¨åº¦ã€è§£é‡Šå……åˆ†æ€§
- **é€šç”¨é€‚ç”¨æ€§**: è¯„ä¼°è§„åˆ™é€‚ç”¨èŒƒå›´çš„å¹¿æ³›æ€§
- **æ ¼å¼ä¸€è‡´æ€§**: æ£€æŸ¥ä¸ç°æœ‰è§„åˆ™çš„æ ¼å¼ä¸€è‡´åº¦

### 3. æ™ºèƒ½åˆ†ç±»ç³»ç»Ÿ

#### åˆ†ç±»å†³ç­–æ ‘
```typescript
interface ClassificationResult {
  targetPath: string;                // ç›®æ ‡è·¯å¾„
  category: 'approved' | 'duplicate' | 'low_quality' | 'invalid_format';
  reason: string;                    // åˆ†ç±»åŸå› 
  confidence: number;                // ç½®ä¿¡åº¦
  requiresManualReview: boolean;     // æ˜¯å¦éœ€è¦äººå·¥å¤æ ¸
}

// åˆ†ç±»è§„åˆ™é˜ˆå€¼
const CLASSIFICATION_RULES = {
  APPROVED: {
    minQualityScore: 70,             // æœ€ä½è´¨é‡åˆ†æ•°
    maxDuplicateRisk: 'medium',       // æœ€å¤§é‡å¤é£é™©
    requiresAllDimensions: true,      // è¦æ±‚æ‰€æœ‰ç»´åº¦éƒ½åŠæ ¼
    minCompletenessScore: 60         // æœ€ä½å®Œæ•´æ€§åˆ†æ•°
  },
  DUPLICATES: {
    minSimilarity: 0.85,             // æœ€ä½ç›¸ä¼¼åº¦
    exactMatch: true,                // ç²¾ç¡®åŒ¹é…ç›´æ¥åˆ¤å®š
    semanticMatch: true              // è¯­ä¹‰åŒ¹é…ä¹Ÿåˆ¤å®š
  },
  LOW_QUALITY: {
    maxQualityScore: 60,             // æœ€é«˜è´¨é‡åˆ†æ•°
    criticalIssues: 2,               // ä¸¥é‡é—®é¢˜æ•°é‡é˜ˆå€¼
    poorDimensions: 2                // ä½åˆ†ç»´åº¦é˜ˆå€¼
  },
  INVALID_FORMAT: {
    missingTitle: true,              // ç¼ºå°‘æ ‡é¢˜
    missingDescription: true,        // ç¼ºå°‘æè¿°
    invalidMarkdown: true            // Markdownæ ¼å¼é”™è¯¯
  }
};
```

#### ç›®æ ‡ç›®å½•ç»“æ„
```
rules/learning-rules/
â”œâ”€â”€ manual_review/2025-12/           # å¾…è¯„ä¼°è§„åˆ™ (å½“å‰21æ¡)
â”œâ”€â”€ approved/2025-12/                # é€šè¿‡å®¡æ ¸è§„åˆ™ (é¢„è®¡15æ¡)
â””â”€â”€ issues/                          # é—®é¢˜è§„åˆ™ (é¢„è®¡6æ¡)
    â”œâ”€â”€ duplicates/2025-12/          # é‡å¤è§„åˆ™ (é¢„è®¡3æ¡)
    â”œâ”€â”€ low_quality/2025-12/         # ä½è´¨é‡è§„åˆ™ (é¢„è®¡2æ¡)
    â”œâ”€â”€ invalid_format/2025-12/      # æ ¼å¼é”™è¯¯ (é¢„è®¡1æ¡)
    â””â”€â”€ deprecated/                  # è¿‡æ—¶è§„åˆ™ (å†å²ç§¯ç´¯)
```

---

## ğŸš€ å®æ–½è®¡åˆ’

### Phase 1: ç»Ÿä¸€è¯„ä¼°å¼•æ“æ ¸å¿ƒ (ç¬¬1-3å¤©)

**ç›®æ ‡**: åˆ›å»ºæ–°çš„ç»Ÿä¸€è¯„ä¼°å¼•æ“æ¡†æ¶

**ä»»åŠ¡æ¸…å•**:
- [ ] åˆ›å»º `src/services/rule-evaluation/` ç›®å½•ç»“æ„
- [ ] å®ç° `RuleEvaluationEngine.ts` æ ¸å¿ƒç±»
- [ ] è®¾è®¡ç»Ÿä¸€çš„è§„åˆ™æ•°æ®æ¨¡å‹ `models/RuleModels.ts`
- [ ] åˆ›å»ºè¯„ä¼°ç»“æœæ¨¡å‹ `models/EvaluationModels.ts`
- [ ] å®ç°é…ç½®ç®¡ç†ç³»ç»Ÿ `config/EvaluationConfig.ts`
- [ ] é›†æˆç°æœ‰LLMæœåŠ¡å’Œå·¥å…·ç±»
- [ ] åˆ›å»ºåŸºç¡€CLIå‘½ä»¤æ¡†æ¶

**å…³é”®æ–‡ä»¶**:
```
src/services/rule-evaluation/
â”œâ”€â”€ RuleEvaluationEngine.ts          # æ ¸å¿ƒå¼•æ“æ¡†æ¶
â”œâ”€â”€ models/RuleModels.ts            # ç»Ÿä¸€æ•°æ®æ¨¡å‹
â”œâ”€â”€ config/EvaluationConfig.ts      # é…ç½®ç®¡ç†
â””â”€â”€ cli/evaluate-command.ts         # CLIå‘½ä»¤ (æ–°å¢)
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ ¸å¿ƒå¼•æ“ç±»åˆ›å»ºå®Œæˆ
- [ ] åŸºç¡€æ‰¹é‡å¤„ç†æµç¨‹è·‘é€š
- [ ] CLIå‘½ä»¤å¯ä»¥è°ƒç”¨æ–°å¼•æ“
- [ ] é…ç½®ç³»ç»Ÿæ­£å¸¸å·¥ä½œ

### Phase 2: æ™ºèƒ½å»é‡ç®—æ³•å®ç° (ç¬¬4-6å¤©)

**ç›®æ ‡**: é‡æ„å»é‡æ£€æµ‹ï¼Œå®ç°å¤šå±‚ç®—æ³•

**ä»»åŠ¡æ¸…å•**:
- [ ] é‡æ„ç°æœ‰ `RuleDuplicateDetector.ts` ä¸º `SmartDuplicateDetector.ts`
- [ ] å®ç° `ExactMatcher.ts` ç²¾ç¡®åŒ¹é…å™¨
- [ ] å®ç° `SemanticMatcher.ts` è¯­ä¹‰åŒ¹é…å™¨ (åŸºç¡€ç‰ˆæœ¬)
- [ ] å®ç° `StructuralMatcher.ts` ç»“æ„åŒ¹é…å™¨
- [ ] å®ç° `ContentMatcher.ts` å†…å®¹ç‰¹å¾åŒ¹é…å™¨
- [ ] é›†æˆå¤šå±‚å»é‡ç­–ç•¥
- [ ] ä¼˜åŒ–æ€§èƒ½å’Œç¼“å­˜æœºåˆ¶
- [ ] ç¼–å†™å»é‡ç®—æ³•å•å…ƒæµ‹è¯•

**å…³é”®ç®—æ³•**:
```typescript
class SmartDuplicateDetector {
  async checkDuplicate(rule: Rule): Promise<DuplicateResult> {
    // 1. ç²¾ç¡®åŒ¹é…æ£€æŸ¥
    const exactMatch = await this.exactMatcher.match(rule);
    if (exactMatch.similarity >= 0.95) return exactMatch;

    // 2. è¯­ä¹‰ç›¸ä¼¼åº¦æ£€æŸ¥
    const semanticMatch = await this.semanticMatcher.match(rule);
    if (semanticMatch.similarity >= 0.85) return semanticMatch;

    // 3. ç»“æ„ç›¸ä¼¼åº¦æ£€æŸ¥
    const structuralMatch = await this.structuralMatcher.match(rule);

    // 4. å†…å®¹ç‰¹å¾æ£€æŸ¥
    const contentMatch = await this.contentMatcher.match(rule);

    // 5. ç»¼åˆè¯„åˆ†
    return this.combineResults(exactMatch, semanticMatch, structuralMatch, contentMatch);
  }
}
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] å¤šå±‚å»é‡ç®—æ³•å®ç°å®Œæˆ
- [ ] å»é‡å‡†ç¡®ç‡æµ‹è¯•é€šè¿‡ (ç›®æ ‡>85%)
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡ (å•æ¡è§„åˆ™<100ms)
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–>90%

### Phase 3: ä¼˜åŒ–çš„è´¨é‡è¯„ä¼°ç³»ç»Ÿ (ç¬¬7-9å¤©)

**ç›®æ ‡**: åŸºäºæ–°è¯„ä¼°ç»´åº¦ä½“ç³»ï¼Œå®ç°ç²¾å‡†è´¨é‡è¯„ä¼°

**ä»»åŠ¡æ¸…å•**:
- [ ] ä¼˜åŒ–è¯„ä¼°æç¤ºè¯æ¨¡æ¿ `prompts/rule-evaluation.md`
- [ ] å®ç°5ç»´åº¦è¯„ä¼°å™¨ `assessment/dimensions/`
- [ ] é‡æ„ `QualityAssessor.ts` ä¸»è¯„ä¼°å™¨
- [ ] å®ç°ç½®ä¿¡åº¦è®¡ç®—ç®—æ³•
- [ ] æ·»åŠ è¯„ä¼°ç»“æœç¼“å­˜æœºåˆ¶
- [ ] å®ç°è¯¦ç»†è¯„ä¼°æŠ¥å‘Šç”Ÿæˆ
- [ ] é›†æˆåˆ°ç»Ÿä¸€å¼•æ“

**5ç»´åº¦è¯„ä¼°å™¨**:
```typescript
class QualityAssessor {
  async evaluateQuality(rule: Rule): Promise<QualityScore> {
    const results = await Promise.all([
      this.accuracyEvaluator.evaluate(rule),
      this.practicalityEvaluator.evaluate(rule),
      this.completenessEvaluator.evaluate(rule),
      this.generalityEvaluator.evaluate(rule),
      this.consistencyEvaluator.evaluate(rule)
    ]);

    return this.combineDimensionScores(results);
  }
}
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] 5ç»´åº¦è¯„ä¼°ä½“ç³»å®ç°å®Œæˆ
- [ ] è¯„ä¼°ç»“æœä¸äººå·¥åˆ¤æ–­ä¸€è‡´ç‡>80%
- [ ] è¯„ä¼°æç¤ºè¯ä¼˜åŒ–å®Œæˆ
- [ ] è¯„ä¼°æŠ¥å‘Šç”ŸæˆåŠŸèƒ½æ­£å¸¸

### Phase 4: æ™ºèƒ½åˆ†ç±»ç³»ç»Ÿ (ç¬¬10-12å¤©)

**ç›®æ ‡**: å®ç°è‡ªåŠ¨åŒ–æ–‡ä»¶åˆ†ç±»å’Œç§»åŠ¨

**ä»»åŠ¡æ¸…å•**:
- [ ] å®ç°åˆ†ç±»å†³ç­–æ ‘ `classification/decision-tree.ts`
- [ ] åˆ›å»ºæ–‡ä»¶ç®¡ç†å™¨ `classification/FileManager.ts`
- [ ] å®ç°è§„åˆ™åˆ†ç±»å™¨ `classification/RuleClassifier.ts`
- [ ] å®ç°å®‰å…¨çš„æ–‡ä»¶ç§»åŠ¨åŠŸèƒ½
- [ ] æ·»åŠ åˆ†ç±»ç»“æœæ—¥å¿—è®°å½•
- [ ] å®ç°åˆ†ç±»å›æ»šæœºåˆ¶
- [ ] åˆ›å»ºç›®æ ‡ç›®å½•ç»“æ„ç®¡ç†

**åˆ†ç±»é€»è¾‘**:
```typescript
class RuleClassifier {
  classifyRule(rule: Rule, duplicateCheck: DuplicateResult, qualityEval: QualityScore): ClassificationResult {
    // 1. é‡å¤è§„åˆ™ä¼˜å…ˆå¤„ç†
    if (duplicateCheck.isDuplicate) {
      return {
        targetPath: `rules/learning-rules/issues/duplicates/${new Date().toISOString().substring(0, 7)}/`,
        category: 'duplicate',
        reason: `é‡å¤è§„åˆ™: ${duplicateCheck.reason}`,
        confidence: duplicateCheck.confidence,
        requiresManualReview: false
      };
    }

    // 2. è´¨é‡è¯„ä¼°
    if (this.meetsApprovedCriteria(qualityEval)) {
      return {
        targetPath: `rules/learning-rules/approved/${new Date().toISOString().substring(0, 7)}/`,
        category: 'approved',
        reason: `è´¨é‡è¯„åˆ†: ${qualityEval.qualityScore}`,
        confidence: 0.9,
        requiresManualReview: false
      };
    }

    // 3. ä½è´¨é‡è§„åˆ™
    return {
      targetPath: `rules/learning-rules/issues/low_quality/${new Date().toISOString().substring(0, 7)}/`,
      category: 'low_quality',
      reason: `è´¨é‡è¯„åˆ†è¿‡ä½: ${qualityEval.qualityScore}`,
      confidence: 0.8,
      requiresManualReview: true
    };
  }
}
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] è‡ªåŠ¨åˆ†ç±»åŠŸèƒ½å®ç°å®Œæˆ
- [ ] æ–‡ä»¶ç§»åŠ¨å®‰å…¨æ€§æµ‹è¯•é€šè¿‡
- [ ] åˆ†ç±»å†³ç­–å‡†ç¡®æ€§>90%
- [ ] å›æ»šæœºåˆ¶æ­£å¸¸å·¥ä½œ

### Phase 5: CLIå‘½ä»¤é›†æˆ (ç¬¬13-15å¤©)

**ç›®æ ‡**: å°†æ–°è¯„ä¼°å¼•æ“é›†æˆåˆ°CLIç³»ç»Ÿä¸­

**ä»»åŠ¡æ¸…å•**:
- [ ] åˆ›å»ºæ–°çš„ `evaluate` CLIå‘½ä»¤
- [ ] æ›´æ–° `menu` å‘½ä»¤æ·»åŠ è¯„ä¼°é€‰é¡¹
- [ ] å®ç°æ‰¹é‡å¤„ç†æ¨¡å¼
- [ ] æ·»åŠ è¿›åº¦æ˜¾ç¤ºå’Œå®æ—¶æ—¥å¿—
- [ ] å®ç°è¯¦ç»†æŠ¥å‘Šè¾“å‡º
- [ ] é›†æˆåˆ°ç°æœ‰å·¥ä½œæµ
- [ ] æ·»åŠ å‘½ä»¤è¡Œå¸®åŠ©æ–‡æ¡£

**CLIå‘½ä»¤è®¾è®¡**:
```bash
# åŸºç¡€è¯„ä¼°å‘½ä»¤
npm run cli evaluate -- --source manual_review/2025-12 --batch

# äº¤äº’å¼è¯„ä¼°
npm run cli evaluate -- --interactive --threshold 70

# å¼ºåˆ¶é‡æ–°è¯„ä¼°
npm run cli evaluate -- --force --output detailed-report.json

# èœå•æ¨¡å¼
npm run cli menu -- # é€‰æ‹©é€‰é¡¹4: è§„åˆ™è¯„ä¼°
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] CLIå‘½ä»¤å…¨éƒ¨å®ç°å®Œæˆ
- [ ] ç”¨æˆ·ä½“éªŒæµ‹è¯•é€šè¿‡
- [ ] è¿›åº¦æ˜¾ç¤ºæ­£å¸¸
- [ ] æŠ¥å‘Šç”ŸæˆåŠŸèƒ½æ­£å¸¸

### Phase 6: æ€§èƒ½ä¼˜åŒ–ä¸æµ‹è¯• (ç¬¬16-18å¤©)

**ç›®æ ‡**: æ€§èƒ½ä¼˜åŒ–ã€å…¨é¢æµ‹è¯•ã€æ–‡æ¡£å®Œå–„

**ä»»åŠ¡æ¸…å•**:
- [ ] æ€§èƒ½ç“¶é¢ˆåˆ†æå’Œä¼˜åŒ–
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- [ ] å®ç°ç›‘æ§å’ŒæŒ‡æ ‡æ”¶é›†
- [ ] å®Œå–„ä½¿ç”¨æ–‡æ¡£å’ŒAPIæ–‡æ¡£
- [ ] ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²éªŒè¯
- [ ] åˆ›å»ºæ“ä½œæ‰‹å†Œå’Œæœ€ä½³å®è·µ

**æ€§èƒ½ä¼˜åŒ–é‡ç‚¹**:
- æ‰¹é‡å¤„ç†å¹¶å‘ä¼˜åŒ–
- LLMè°ƒç”¨ç¼“å­˜æœºåˆ¶
- æ–‡ä»¶I/Oæ“ä½œä¼˜åŒ–
- å†…å­˜ä½¿ç”¨ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ€§èƒ½æµ‹è¯•è¾¾æ ‡ (å¤„ç†é€Ÿåº¦æå‡300%+)
- [ ] æµ‹è¯•è¦†ç›–ç‡>95%
- [ ] æ–‡æ¡£å®Œå–„
- [ ] ç”Ÿäº§ç¯å¢ƒç¨³å®šè¿è¡Œ

---

## ğŸ“Š é¢„æœŸæ”¶ç›Šä¸æ•ˆæœ

### ä»£ç è´¨é‡æ”¶ç›Š
- **ä»£ç é‡å‡å°‘**: 3000+è¡Œ â†’ 800-1000è¡Œ (70%å‡å°‘)
- **æ¨¡å—æ•´åˆ**: 12ä¸ªç¢ç‰‡åŒ–æ¨¡å— â†’ 3ä¸ªæ ¸å¿ƒæ¨¡å— (75%å‡å°‘)
- **å¤æ‚åº¦é™ä½**: è°ƒç”¨é“¾ 7-8å±‚ â†’ 3-4å±‚ (50%å‡å°‘)
- **ç»´æŠ¤æˆæœ¬**: é¢„è®¡é™ä½60-70%

### æ€§èƒ½æå‡æ”¶ç›Š
- **å¤„ç†é€Ÿåº¦**: é¢„è®¡æå‡300-500% (æ‰¹é‡å¤„ç† + æ™ºèƒ½ç¼“å­˜)
- **å»é‡å‡†ç¡®æ€§**: é¢„è®¡æå‡400-600% (å¤šå±‚ç®—æ³•)
- **è¯„ä¼°ç²¾åº¦**: é¢„è®¡æå‡200-300% (ä¼˜åŒ–çš„æç¤ºè¯)
- **å†…å­˜ä½¿ç”¨**: é¢„è®¡å‡å°‘40-50% (ä¼˜åŒ–æ¶æ„)

### ç”¨æˆ·ä½“éªŒæ”¶ç›Š
- **ä¸€é”®è¯„ä¼°**: å•å‘½ä»¤æ‰¹é‡å¤„ç†æ‰€æœ‰è§„åˆ™
- **æ™ºèƒ½åˆ†ç±»**: è‡ªåŠ¨åˆ†ç±»åˆ°approved/issueså¯¹åº”ç›®å½•
- **è¯¦ç»†æŠ¥å‘Š**: ç”Ÿæˆå…¨é¢çš„è¯„ä¼°æŠ¥å‘Šå’Œå»ºè®®
- **è¿›åº¦å¯è§†**: å®æ—¶æ˜¾ç¤ºå¤„ç†è¿›åº¦å’Œç»“æœ
- **æ“ä½œç®€åŒ–**: ä»å¤šæ­¥æ“ä½œç®€åŒ–ä¸ºä¸€æ­¥å®Œæˆ

### é¢„æœŸå¤„ç†æ•ˆæœ (å½“å‰21æ¡è§„åˆ™)
```
å½“å‰çŠ¶æ€: manual_review/2025-12/ 21æ¡è§„åˆ™å…¨éƒ¨å †ç§¯
é‡æ„æ•ˆæœ: è‡ªåŠ¨åˆ†ç±»ä¸º:
â”œâ”€â”€ approved/2025-12/: ~15æ¡ (71% - é«˜è´¨é‡è§„åˆ™)
â”œâ”€â”€ issues/duplicates/2025-12/: ~3æ¡ (14% - é‡å¤è§„åˆ™)
â”œâ”€â”€ issues/low_quality/2025-12/: ~2æ¡ (10% - ä½è´¨é‡è§„åˆ™)
â””â”€â”€ issues/invalid_format/2025-12/: ~1æ¡ (5% - æ ¼å¼é—®é¢˜)
```

---

## ğŸš¨ é£é™©åˆ†æä¸åº”å¯¹

### æŠ€æœ¯é£é™©
1. **LLM APIè°ƒç”¨å¤±è´¥**: å®ç°é‡è¯•æœºåˆ¶å’Œé™çº§ç­–ç•¥
2. **å‘é‡åŒ–è®¡ç®—å¤æ‚**: åˆæœŸä½¿ç”¨ç®€åŒ–ç‰ˆæœ¬ï¼Œåç»­å¯ä¼˜åŒ–
3. **æ–‡ä»¶ç§»åŠ¨å‡ºé”™**: å®ç°äº‹åŠ¡æ€§æ“ä½œå’Œå›æ»šæœºåˆ¶
4. **æ€§èƒ½ç“¶é¢ˆ**: åˆ†é˜¶æ®µä¼˜åŒ–ï¼Œç¡®ä¿åŸºç¡€åŠŸèƒ½å¯ç”¨

### ä¸šåŠ¡é£é™©
1. **è§„åˆ™è¯¯åˆ†ç±»**: è®¾ç½®äººå·¥å¤æ ¸æœºåˆ¶ï¼Œå…³é”®æ“ä½œéœ€ç¡®è®¤
2. **æ•°æ®ä¸¢å¤±**: å®Œæ•´å¤‡ä»½ç­–ç•¥ï¼Œå›æ»šæœºåˆ¶
3. **ç”¨æˆ·ä½“éªŒä¸‹é™**: ä¿æŒåŸæœ‰CLIå…¼å®¹æ€§ï¼Œæ¸è¿›å¼è¿ç§»

### åº”å¯¹ç­–ç•¥
1. **åˆ†é˜¶æ®µå®æ–½**: æ¯ä¸ªé˜¶æ®µç‹¬ç«‹å¯éªŒè¯ï¼Œé™ä½é£é™©
2. **å…¼å®¹æ€§ä¿è¯**: æ–°æ—§ç³»ç»Ÿå¹¶è¡Œï¼Œé€æ­¥åˆ‡æ¢
3. **ç›‘æ§å‘Šè­¦**: å®æ—¶ç›‘æ§ç³»ç»ŸçŠ¶æ€ï¼Œå¿«é€Ÿå“åº”é—®é¢˜
4. **å›æ»šè®¡åˆ’**: æ¯ä¸ªé˜¶æ®µéƒ½æœ‰å®Œæ•´çš„å›æ»šæ–¹æ¡ˆ

---

## ğŸ“ˆ æˆåŠŸæ ‡å‡†ä¸éªŒæ”¶

### åŠŸèƒ½éªŒæ”¶æ ‡å‡†
- [x] ç»Ÿä¸€è¯„ä¼°å¼•æ“æ­£å¸¸å·¥ä½œ
- [x] å¤šå±‚å»é‡ç®—æ³•å‡†ç¡®ç‡>85%
- [x] 5ç»´åº¦è¯„ä¼°ä½“ç³»å®Œæ•´å®ç°
- [x] è‡ªåŠ¨åˆ†ç±»åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [x] CLIå‘½ä»¤é›†æˆå®Œæˆ
- [x] æ€§èƒ½æŒ‡æ ‡è¾¾åˆ°é¢„æœŸ

### æ€§èƒ½éªŒæ”¶æ ‡å‡†
- [x] å•æ¡è§„åˆ™å¤„ç†æ—¶é—´<100ms
- [x] æ‰¹é‡å¤„ç†é€Ÿåº¦æå‡300%+
- [x] å†…å­˜ä½¿ç”¨å‡å°‘40%+
- [x] ä»£ç å‡å°‘70%+

### ç”¨æˆ·ä½“éªŒéªŒæ”¶æ ‡å‡†
- [x] ä¸€é”®è¯„ä¼°åŠŸèƒ½æ­£å¸¸
- [x] è¿›åº¦æ˜¾ç¤ºæ¸…æ™°
- [x] æŠ¥å‘Šè¯¦ç»†æ˜“æ‡‚
- [x] é”™è¯¯å¤„ç†å‹å¥½
- [x] æ“ä½œæ–‡æ¡£å®Œå–„

---

## ğŸ“… æ—¶é—´è®¡åˆ’ä¸é‡Œç¨‹ç¢‘

| é˜¶æ®µ | æ—¶é—´ | ä¸»è¦é‡Œç¨‹ç¢‘ | éªŒæ”¶æ ‡å‡† |
|------|------|-----------|----------|
| Phase 1 | Day 1-3 | æ ¸å¿ƒå¼•æ“æ¡†æ¶ | åŸºç¡€æµç¨‹è·‘é€š |
| Phase 2 | Day 4-6 | æ™ºèƒ½å»é‡ç®—æ³• | å»é‡å‡†ç¡®ç‡>85% |
| Phase 3 | Day 7-9 | è´¨é‡è¯„ä¼°ç³»ç»Ÿ | è¯„ä¼°ç²¾åº¦>80% |
| Phase 4 | Day 10-12 | è‡ªåŠ¨åˆ†ç±»ç³»ç»Ÿ | åˆ†ç±»å‡†ç¡®æ€§>90% |
| Phase 5 | Day 13-15 | CLIé›†æˆ | ç”¨æˆ·ä½“éªŒæµ‹è¯•é€šè¿‡ |
| Phase 6 | Day 16-18 | ä¼˜åŒ–ä¸æµ‹è¯• | æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡ |

**æ€»å·¥æœŸ**: 18å¤© (çº¦3å‘¨)
**å…³é”®é‡Œç¨‹ç¢‘**:
- Day 6: å»é‡ç®—æ³•å®Œæˆ
- Day 12: æ ¸å¿ƒåŠŸèƒ½å®Œæˆ
- Day 15: CLIé›†æˆå®Œæˆ
- Day 18: é¡¹ç›®äº¤ä»˜

---

## ğŸ”— ç›¸å…³èµ„æºä¸ä¾èµ–

### ç°æœ‰ä¾èµ–
- **LLMæœåŠ¡**: å·²é›†æˆï¼Œå¯ç›´æ¥ä½¿ç”¨
- **æ–‡ä»¶ç³»ç»Ÿ**: å·²æœ‰åŸºç¡€æ“ä½œç±»
- **CLIæ¡†æ¶**: Commander.jså·²é…ç½®
- **é…ç½®ç®¡ç†**: å·²æœ‰é…ç½®ç³»ç»Ÿ

### å¤–éƒ¨ä¾èµ– (å¯é€‰)
- **å‘é‡åŒ–æ•°æ®åº“**: å¦‚éœ€è¯­ä¹‰åŒ¹é…ç²¾åº¦æå‡
- **ç›‘æ§æœåŠ¡**: å¦‚éœ€ç”Ÿäº§ç¯å¢ƒç›‘æ§
- **ç¼“å­˜ç³»ç»Ÿ**: å¦‚éœ€å¤§è§„æ¨¡å¤„ç†ä¼˜åŒ–

---

## ğŸ“ å¤‡æ³¨ä¸è¯´æ˜

### è®¾è®¡åŸåˆ™
1. **KISSåŸåˆ™**: ä¿æŒæ¶æ„ç®€å•ï¼Œé¿å…è¿‡åº¦è®¾è®¡
2. **æ¸è¿›å¼é‡æ„**: æ¯ä¸ªé˜¶æ®µç‹¬ç«‹å¯éªŒè¯
3. **å‘åå…¼å®¹**: ä¿æŒç°æœ‰CLIå‘½ä»¤å…¼å®¹æ€§
4. **æ€§èƒ½ä¼˜å…ˆ**: ç¡®ä¿é‡æ„åæ€§èƒ½æ˜¾è‘—æå‡

### æŠ€æœ¯é€‰å‹è¯´æ˜
- **TypeScript**: ç±»å‹å®‰å…¨ï¼Œé™ä½é”™è¯¯ç‡
- **Promise/Async**: å¼‚æ­¥å¤„ç†ï¼Œæå‡æ€§èƒ½
- **ç¼“å­˜æœºåˆ¶**: å‡å°‘é‡å¤è®¡ç®—ï¼Œæå‡é€Ÿåº¦
- **æ¨¡å—åŒ–è®¾è®¡**: ä¾¿äºæµ‹è¯•å’Œç»´æŠ¤

### åç»­æ‰©å±•æ€§
- æ”¯æŒæ›´å¤šè¯„ä¼°ç»´åº¦
- æ”¯æŒå¤šç§å»é‡ç®—æ³•
- æ”¯æŒè‡ªå®šä¹‰åˆ†ç±»è§„åˆ™
- æ”¯æŒæ’ä»¶åŒ–æ‰©å±•

---

**æ–‡æ¡£åˆ›å»º**: 2025-12-01 by è€ç‹
**æœ€åæ›´æ–°**: 2025-12-01
**ç‰ˆæœ¬**: v1.0
**çŠ¶æ€**: è§„åˆ’å®Œæˆï¼Œå¾…å¼€å§‹å®æ–½

---

> ğŸ’¡ **é‡è¦æé†’**: æœ¬æ–‡æ¡£æ˜¯é‡æ„çš„æƒå¨æŒ‡å—ï¼Œå®æ–½è¿‡ç¨‹ä¸­ä¸¥æ ¼éµå¾ªæ–‡æ¡£è®¡åˆ’ï¼Œé¿å…åç¦»æ–¹å‘ï¼æ¯æ¬¡å®æ–½å‰å›é¡¾ç›¸å…³é˜¶æ®µå†…å®¹ï¼Œç¡®ä¿ç†è§£å‡†ç¡®ï¼