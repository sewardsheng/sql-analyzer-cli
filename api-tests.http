### SQL Analyzer API 测试集合
### 基础URL: http://localhost:3000

@baseUrl = http://localhost:3000
@contentType = application/json

### ===== 系统检查 =====

### 1. 健康检查
GET {{baseUrl}}/api/system/health

### 2. Ping检查
GET {{baseUrl}}/api/system/health/ping

### 3. 系统状态
GET {{baseUrl}}/api/system/status

### 4. 知识库状态
GET {{baseUrl}}/api/system/status/knowledge

### 5. 分析器状态
GET {{baseUrl}}/api/system/status/analyzer

### ===== SQL分析 =====

### 1. 单条SQL分析
POST {{baseUrl}}/api/analyze
Content-Type: {{contentType}}

{
  "sql": "SELECT * FROM users WHERE id = 1",
  "options": {
    "performance": true,
    "security": true,
    "standards": true,
    "learn": true
  }
}

### 2. 批量SQL分析
POST {{baseUrl}}/api/analyze/batch
Content-Type: {{contentType}}

{
  "sqls": [
    "SELECT * FROM users WHERE id = 1",
    "UPDATE users SET name = 'test' WHERE id = 1",
    "DELETE FROM orders WHERE created_at < '2024-01-01'"
  ],
  "options": {
    "performance": true,
    "security": true,
    "standards": true
  }
}

### 3. 分析状态检查
GET {{baseUrl}}/api/analyze/status

### ===== 历史记录 =====

### 1. 获取统计信息
GET {{baseUrl}}/api/history/stats

### 2. 获取历史列表
GET {{baseUrl}}/api/history

### 3. 按ID获取历史记录
GET {{baseUrl}}/api/history/1

### 4. 导出历史记录
GET {{baseUrl}}/api/history/export

### 5. 删除历史记录
DELETE {{baseUrl}}/api/history/1

### 6. 清空历史记录
DELETE {{baseUrl}}/api/history

### 7. 搜索历史记录
POST {{baseUrl}}/api/history/search
Content-Type: {{contentType}}

{
  "query": "SELECT",
  "limit": 10,
  "offset": 0
}

### ===== 知识库管理 =====

### 1. 获取知识库概览
GET {{baseUrl}}/api/knowledge

### 2. 搜索知识
POST {{baseUrl}}/api/knowledge/search
Content-Type: {{contentType}}

{
  "query": "索引优化",
  "limit": 10
}

### 3. 学习新知识
POST {{baseUrl}}/api/knowledge/learn
Content-Type: {{contentType}}

{
  "rulesDir": "./rules",
  "reset": false,
  "priorityApproved": false
}

### 4. 重置知识库
POST {{baseUrl}}/api/knowledge/reset

### 5. 导出知识库
GET {{baseUrl}}/api/knowledge/export


### ===== 配置管理 =====

### 1. 获取分析器配置
GET {{baseUrl}}/api/config

### 2. 获取模块状态
GET {{baseUrl}}/api/config/modules

### 3. 获取服务器配置
GET {{baseUrl}}/api/config/server

### 4. 更新服务器端口
PUT {{baseUrl}}/api/config/server.port
Content-Type: {{contentType}}

{
  "value": 3001
}

### ===== 调试接口 =====

### 1. API测试
GET {{baseUrl}}/api/test

### 2. 调试页面
GET {{baseUrl}}/debug

### 3. Web界面
GET {{baseUrl}}/web

### 4. 首页
GET {{baseUrl}}/

### 5. API文档
GET {{baseUrl}}/api/docs

### ===== 综合测试案例 =====

### 复杂JOIN测试
POST {{baseUrl}}/api/analyze
Content-Type: {{contentType}}

{
  "sql": "SELECT u.*, o.* FROM users u JOIN orders o ON u.id = o.user_id WHERE u.status = 'active' ORDER BY o.created_at DESC",
  "options": {
    "performance": true,
    "security": false,
    "standards": false
  }
}

### SQL注入测试
POST {{baseUrl}}/api/analyze
Content-Type: {{contentType}}

{
  "sql": "SELECT * FROM users WHERE name = '" + userName + "' AND password = '" + password + "'",
  "options": {
    "performance": false,
    "security": true,
    "standards": false
  }
}

### 标准规范测试
POST {{baseUrl}}/api/analyze
Content-Type: {{contentType}}

{
  "sql": "select * from users",
  "options": {
    "performance": false,
    "security": false,
    "standards": true
  }
}

### 批量综合测试
POST {{baseUrl}}/api/analyze/batch
Content-Type: {{contentType}}

{
  "sqls": [
    "CREATE TABLE temp_users AS SELECT * FROM users",
    "INSERT INTO audit_log (action) VALUES ('user_created')",
    "UPDATE user_stats SET login_count = login_count + 1 WHERE user_id = 1"
  ],
  "options": {
    "performance": true,
    "security": true,
    "standards": true,
    "learn": true
  }
}