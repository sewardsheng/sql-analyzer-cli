### SQL Analyzer API æµ‹è¯•æ–‡ä»¶
### - å»ºè®®å…ˆæµ‹è¯•åŸºç¡€æ¥å£ï¼Œå†ä½¿ç”¨è§„åˆ™å­¦ä¹ åŠŸèƒ½
###
### ğŸš€ å¿«é€Ÿå¼€å§‹ï¼š
### 1. ç¡®ä¿æœåŠ¡å™¨è¿è¡Œ: bun run src/server.js
### 2. æµ‹è¯•å¥åº·æ£€æŸ¥: GET {{baseUrl}}/api/system/health
### 3. ä½¿ç”¨è§„åˆ™å­¦ä¹ : POST {{baseUrl}}/api/rule-learning/learn
###
### åŸºç¡€é…ç½®
@baseUrl = http://localhost:3000
@contentType = application/json

### 1. åŸºç¡€æ¥å£æµ‹è¯•

### è·å–APIæ ¹ä¿¡æ¯
GET {{baseUrl}}/
Accept: {{contentType}}

### è·å–APIæ–‡æ¡£
GET {{baseUrl}}/api/docs
Accept: {{contentType}}

### 2. ç³»ç»ŸçŠ¶æ€æ£€æŸ¥

### ç³»ç»Ÿå¥åº·æ£€æŸ¥
GET {{baseUrl}}/api/system/health
Accept: {{contentType}}

### ç®€å•pingæ£€æŸ¥
GET {{baseUrl}}/api/system/health/ping
Accept: {{contentType}}

### è·å–ç³»ç»ŸçŠ¶æ€
GET {{baseUrl}}/api/system/status
Accept: {{contentType}}

### è·å–åˆ†æå™¨çŠ¶æ€
GET {{baseUrl}}/api/system/status/analyzer
Accept: {{contentType}}

### 3. SQLåˆ†ææ¥å£

### å•æ¡SQLåˆ†æ
POST {{baseUrl}}/api/analyze
Content-Type: {{contentType}}

{
  "sql": "SELECT * FROM users WHERE id = 1",
  "options": {
    "performance": true,
    "security": true,
    "standards": true,
    "learn": true
  }
}

### æ‰¹é‡SQLåˆ†æ
POST {{baseUrl}}/api/analyze/batch
Content-Type: {{contentType}}

{
  "sqls": [
    { "sql": "SELECT * FROM users WHERE id = 1" },
    { "sql": "SELECT * FROM orders WHERE user_id = 1" },
    { "sql": "DELETE FROM users WHERE id = 1" }
  ],
  "options": {
    "performance": true,
    "security": true,
    "standards": true,
    "learn": false
  }
}

### è·å–åˆ†æå™¨çŠ¶æ€
GET {{baseUrl}}/api/analyze/status
Accept: {{contentType}}

### 4. å†å²è®°å½•ç®¡ç†

### è·å–æ‰€æœ‰å†å²è®°å½•
GET {{baseUrl}}/api/history
Accept: {{contentType}}

### è·å–å†å²è®°å½•è¯¦æƒ…
GET {{baseUrl}}/api/history/1
Accept: {{contentType}}

### æœç´¢å†å²è®°å½•
POST {{baseUrl}}/api/history/search
Content-Type: {{contentType}}

{
  "sql": "SELECT",
  "limit": 5
}

### è·å–å†å²è®°å½•ç»Ÿè®¡
GET {{baseUrl}}/api/history/stats
Accept: {{contentType}}

### å¯¼å‡ºå†å²è®°å½• (JSONæ ¼å¼)
GET {{baseUrl}}/api/history/export?format=json
Accept: {{contentType}}

### 5. çŸ¥è¯†åº“ç®¡ç†

### è·å–çŸ¥è¯†åº“çŠ¶æ€
GET {{baseUrl}}/api/knowledge
Accept: {{contentType}}

### æœç´¢çŸ¥è¯†åº“
POST {{baseUrl}}/api/knowledge/search
Content-Type: {{contentType}}

{
  "query": "SQLæ³¨å…¥",
  "k": 3
}

### è§¦å‘çŸ¥è¯†åº“å­¦ä¹ 
POST {{baseUrl}}/api/knowledge/learn
Content-Type: {{contentType}}

{
  "rulesDir": "./rules",
  "reset": false,
  "priorityApproved": false
}

### é‡ç½®çŸ¥è¯†åº“
POST {{baseUrl}}/api/knowledge/reset
Content-Type: {{contentType}}

### å¯¼å‡ºçŸ¥è¯†åº“
GET {{baseUrl}}/api/knowledge/export?format=json
Accept: {{contentType}}

### 6. é…ç½®ç®¡ç†

### è·å–æ‰€æœ‰é…ç½®
GET {{baseUrl}}/api/config
Accept: {{contentType}}

### è·å–æŒ‡å®šé…ç½®é¡¹
GET {{baseUrl}}/api/config/api
Accept: {{contentType}}

### æ›´æ–°é…ç½®é¡¹
PUT {{baseUrl}}/api/config/learning
Content-Type: {{contentType}}

{
  "value": {
    "enabled": true,
    "minConfidence": 0.8,
    "minBatchSize": 10
  }
}

### é‡ç½®é…ç½®é¡¹
DELETE {{baseUrl}}/api/config/learning
Accept: {{contentType}}

### é‡ç½®æ‰€æœ‰é…ç½®
POST {{baseUrl}}/api/config/reset
Content-Type: {{contentType}}

### è·å–é…ç½®é¡¹åˆ—è¡¨
GET {{baseUrl}}/api/config/llm
Accept: {{contentType}}

### 7. è§„åˆ™å­¦ä¹ ç®¡ç†

### è·å–è§„åˆ™å­¦ä¹ é…ç½®
GET {{baseUrl}}/api/rule-learning/config
Accept: {{contentType}}

### æ›´æ–°è§„åˆ™å­¦ä¹ é…ç½®
PUT {{baseUrl}}/api/rule-learning/config
Content-Type: {{contentType}}

{
  "config": {
    "learning": {
      "enabled": true,
      "minConfidence": 0.7,
      "minBatchSize": 5,
      "enableRealTimeLearning": true,
      "enableBatchLearning": true
    },
    "autoApproveThreshold": 0.8
  }
}

### é‡ç½®è§„åˆ™å­¦ä¹ é…ç½®
POST {{baseUrl}}/api/rule-learning/config/reset
Content-Type: {{contentType}}

### è·å–è§„åˆ™å­¦ä¹ çŠ¶æ€
GET {{baseUrl}}/api/rule-learning/status
Accept: {{contentType}}

### è§¦å‘è§„åˆ™å­¦ä¹  - æ ¸å¿ƒåŠŸèƒ½
POST {{baseUrl}}/api/rule-learning/learn
Content-Type: {{contentType}}

{
  "options": {
    "batchSize": 10,
    "minConfidence": 0.7
  }
}

### è·å–é˜ˆå€¼è°ƒæ•´ç»Ÿè®¡
GET {{baseUrl}}/api/rule-learning/threshold-stats
Accept: {{contentType}}

### 8. é”™è¯¯æµ‹è¯•æ¥å£

### æµ‹è¯•404é”™è¯¯
GET {{baseUrl}}/api/nonexistent
Accept: {{contentType}}

### æµ‹è¯•å‚æ•°é”™è¯¯
POST {{baseUrl}}/api/analyze
Content-Type: {{contentType}}

{
  "sql": ""
}

### æµ‹è¯•æ‰¹é‡åˆ†æé™åˆ¶
POST {{baseUrl}}/api/analyze/batch
Content-Type: {{contentType}}

{
  "sqls": [],
  "options": {}
}