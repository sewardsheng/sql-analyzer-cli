# SQL分析器规则人工审批指南

## 📋 人工审批流程说明

是的，您可以通过**直接移动文件**的方式进行人工审批！系统设计了简单直观的文件操作方式。

### 🎯 当前状态查看

首先查看需要人工审核的规则：

```bash
# 查看待审核规则列表
ls rules/learning-rules/manual_review/2025-11/

# 查看具体规则内容
cat rules/learning-rules/manual_review/2025-11/敏感字段访问控制-2025-11-27T11-52-52-790Z.md
```

### ✅ 审批通过操作流程

**方法1：直接拖拽文件（推荐）**
1. 打开文件管理器
2. 导航到 `rules/learning-rules/manual_review/2025-11/`
3. 选择要批准的规则文件
4. **拖拽到** `rules/learning-rules/approved/2025-11/` 目录
5. 系统会自动识别并加载新规则

**方法2：命令行移动**
```bash
# 审批通过 - 移动到approved目录
mv "rules/learning-rules/manual_review/2025-11/敏感字段访问控制-2025-11-27T11-52-52-790Z.md" \
   "rules/learning-rules/approved/2025-11/敏感字段访问控制-2025-11-27T11-52-52-790Z.md"
```

### ❌ 审批拒绝操作流程

**方法1：移动到issues目录**
```bash
# 创建issues目录（如果不存在）
mkdir -p rules/learning-rules/issues/2025-11/

# 拒绝规则 - 移动到issues目录
mv "rules/learning-rules/manual_review/2025-11/敏感字段访问控制-2025-11-27T11-52-52-790Z.md" \
   "rules/learning-rules/issues/2025-11/敏感字段访问控制-2025-11-27T11-52-52-790Z.md"
```

**方法2：直接删除（不推荐）**
```bash
# 直接删除规则文件
rm "rules/learning-rules/manual_review/2025-11/敏感字段访问控制-2025-11-27T11-52-52-790Z.md"
```

## 🔍 审批决策参考

### 📊 规则质量评估标准

查看规则文件中的质量评估部分：

```markdown
## 质量评估

- **质量分数**: 95/100
- **质量等级**: 优秀
- **置信度**: 0.9
- **评估摘要**: 关键安全规则，能有效防止敏感信息泄露
```

### 🎯 审批通过标准

**✅ 建议通过的情况：**
- 质量分数 ≥ 80分
- 置信度 ≥ 0.8
- 规则描述清晰明确
- 示例代码正确
- 触发条件合理
- 安全规则严重程度适当

**❌ 建议拒绝的情况：**
- 质量分数 < 70分
- 规则描述模糊或不准确
- 示例代码有错误
- 触发条件过于宽泛或严格
- 与现有规则高度重复
- 安全规则严重程度不匹配

### 🚫 拒绝规则的处理

被拒绝的规则会被移动到 `issues` 目录，这些规则：
- 不会参与后续的SQL分析
- 但会作为历史记录保留
- 可以用于分析规则生成的问题模式
- 有助于改进规则学习算法

###  特殊审批注意事项

#### 安全规则审批
- **Critical级别**: 必须确保规则能检测严重安全威胁
- **High级别**: 需要验证规则的准确性和实用性
- **Medium/Low级别**: 可适当放宽标准

#### 性能规则审批
- 需要验证规则的实际性能影响
- 确保优化建议的可行性
- 考虑不同数据库环境的适用性

## 🛠️ 审批后系统行为

### ✅ 批准后的效果
1. **规则立即生效**: 移动到approved目录后，系统会自动加载
2. **参与安全检测**: 新规则会参与后续的SQL分析
3. **历史记录**: 系统会记录审批时间和审批人

### 🔄 系统热加载
系统支持规则的热加载，无需重启：
```bash
# 查看系统日志确认规则加载
tail -f logs/rule-learning.log
```

## 📋 当前待审核规则

查看当前需要人工审核的规则：

```bash
# 列出所有待审核规则
ls -la rules/learning-rules/manual_review/2025-11/

# 查看规则统计
echo "待审核规则数量: $(ls rules/learning-rules/manual_review/2025-11/ | wc -l)"
echo "已批准规则数量: $(ls rules/learning-rules/approved/2025-11/ | wc -l)"
echo "已拒绝规则数量: $(ls rules/learning-rules/issues/2025-11/ | wc -l)"
```

## 💡 审批最佳实践

### 🎯 快速审批技巧
1. **批量查看**: 先查看所有待审核规则的标题
2. **优先级排序**: 优先处理安全类和高严重程度规则
3. **质量分数参考**: 90分以上基本可以直接通过
4. **示例验证**: 快速检查示例代码的正确性

### 📝 审批记录建议
可以在规则文件中添加审批备注：
```markdown
## 人工审批记录

**审批人**: [您的姓名]
**审批时间**: 2025-11-27
**审批意见**: 规则准确，建议通过
**备注**: 该规则能有效检测敏感字段访问
```

## 🚨 注意事项

1. **文件命名保持**: 移动文件时保持原文件名不变
2. **目录结构**: 确保目标目录存在（系统会自动创建）
3. **权限问题**: 确保有文件系统的读写权限
4. **备份建议**: 重要规则审批前可做备份

通过这套简单直观的文件操作系统，您可以轻松完成规则的人工审批工作！