# ===================================================================
# SQL Analyzer API - 环境变量配置示例
# ===================================================================

# -------------------------------------------------------------------
# LLM (大语言模型) 配置
# -------------------------------------------------------------------
# 自定义 LLM 配置 (如 SiliconFlow) - 主要配置
CUSTOM_API_KEY=your-vector-store-api-key-here
CUSTOM_MODEL=zai-org/GLM-4.6
CUSTOM_BASE_URL=https://api.siliconflow.cn/v1

# -------------------------------------------------------------------
# 向量存储配置
# -------------------------------------------------------------------
VECTOR_STORE_API_KEY=your-vector-store-api-key-here
VECTOR_STORE_BASE_URL=https://api.openai.com/v1
VECTOR_STORE_EMBEDDING_MODEL=BAAI/bge-m3
# -------------------------------------------------------------------
# 基础服务器配置
# -------------------------------------------------------------------
# 注意：使用 API_PORT 作为主要端口配置
# 不再使用单独的 PORT 和 HOST 配置
NODE_ENV=development
LOG_LEVEL=info

# -------------------------------------------------------------------
# API 配置
# -------------------------------------------------------------------
API_PORT=3001
API_HOST=0.0.0.0
API_CORS_ENABLED=true
API_CORS_ORIGIN=*




# -------------------------------------------------------------------
# 规则学习系统配置
# -------------------------------------------------------------------
# 基础配置
RULE_LEARNING_ENABLED=true
RULE_LEARNING_MIN_CONFIDENCE=0.7
RULE_LEARNING_BATCH_SIZE=5
RULE_LEARNING_CONCURRENT_TASKS=3
RULE_LEARNING_LOG_LEVEL=info

# 规则生成配置
RULE_GENERATION_MAX_RULES=10

# 规则评估配置
RULE_EVALUATION_AUTO_APPROVAL_THRESHOLD=70
RULE_EVALUATION_AUTO_APPROVAL_CONFIDENCE=0.8

# 规则存储配置
RULE_STORAGE_ROOT_DIR=rules/learning-rules

# -------------------------------------------------------------------
# 知识库配置（用于规则文档的向量化和搜索）
# -------------------------------------------------------------------
KNOWLEDGE_BASE_ENABLED=true
KNOWLEDGE_RULES_DIR=rules  # 知识库扫描的规则目录
KNOWLEDGE_MAX_FILE_SIZE=10485760

# -------------------------------------------------------------------
# 认证配置
# -------------------------------------------------------------------
# API访问密钥（可选，不设置则无需认证）
# API_KEY=your_api_key_here
# 管理员密钥（可选，用于敏感操作）
# ADMIN_KEY=your_admin_key_here

# -------------------------------------------------------------------
# 速率限制配置
# -------------------------------------------------------------------
# 通用速率限制
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=100

# 分析请求速率限制
ANALYSIS_RATE_LIMIT_WINDOW=600000
ANALYSIS_RATE_LIMIT_MAX=20

# 管理操作速率限制
ADMIN_RATE_LIMIT_WINDOW=300000
ADMIN_RATE_LIMIT_MAX=200

# -------------------------------------------------------------------
# 日志和调试配置
# -------------------------------------------------------------------
LOG_REQUEST_BODY=false
DEBUG=false

# ===================================================================
# 可选配置项说明
# ===================================================================

# API 密钥配置说明
# CUSTOM_API_KEY: 主要使用的 API 密钥（支持 SiliconFlow 等自定义服务商）
# OPENAI_API_KEY: 可选，用于健康检查回退（如果不设置，将使用 CUSTOM_API_KEY）
# VECTOR_STORE_API_KEY: 可选，向量存储专用（如果不设置，将使用 CUSTOM_API_KEY）

# 规则学习系统
# RULE_LEARNING_ENABLED: 是否启用规则学习功能 (true/false)
# RULE_LEARNING_MIN_CONFIDENCE: 最小置信度阈值 (0.0-1.0)
# RULE_LEARNING_BATCH_SIZE: 学习批次大小
# RULE_GENERATION_MAX_RULES: 每次学习生成的最大规则数

# 速率限制
# 所有时间单位都是毫秒 (ms)
# RATE_LIMIT_WINDOW: 时间窗口
# RATE_LIMIT_MAX: 时间窗口内最大请求数

# 环境变量
# NODE_ENV: development/production/test
# LOG_LEVEL: error/warn/info/debug
# LOG_REQUEST_BODY: 是否记录请求体 (true/false)
# DEBUG: 是否启用调试模式 (true/false)