/**
 * 性能分析工具（重构版）
 * 专门分析SQL语句的性能问题
 * 重构：集成智能上下文管理，告别SB的字符串拼接
 */

import { BaseTool } from './base-tool.js';

/**
 * 性能分析工具类
 */
class PerformanceTool extends BaseTool {
  constructor(llmService, knowledgeBase = null) {
    super(llmService, knowledgeBase);
    this.name = 'PerformanceTool';
  }

  /**
   * 获取分析类型
   * @returns {string} 分析类型
   */
  getAnalysisType() {
    return 'performance';
  }

  /**
   * 获取工具特定选项
   * @returns {Object} 工具选项
   */
  getToolSpecificOptions() {
    return {
      focusAreas: ['query_efficiency', 'index_usage', 'resource_consumption'],
      analysisDepth: 'deep',
      includeMetrics: true
    };
  }

  /**
   * 获取温度参数
   * @returns {number} 温度值
   */
  getTemperature() {
    return 0.2; // 性能分析需要更精确，降低随机性
  }

  /**
   * 获取最大token数
   * @returns {number} 最大token数
   */
  getMaxTokens() {
    return 2500; // 性能分析需要更详细的输出
  }

  /**
   * 获取工具描述
   * @returns {string} 描述
   */
  getDescription() {
    return 'SQL性能分析工具，深度识别性能瓶颈并提供智能优化建议';
  }
}

export { PerformanceTool };